'use strict'

// const { test } = require('tap')
// const { build } = require('../helper')
/*

test('200 add vote', async t => {
  const app = await build(t)
  const response = await app.inject({
    method: 'POST',
    url: '/graphql',
    payload: {
      query: `mutation {
  addVote(title: "test") {
    id
    title
  }
}`
    }
  })

  t.strictEqual(response.statusCode, 200)
  t.deepEqual(JSON.parse(response.payload), { data: { addVote: { id: 1, title: 'test' } } })

  return true
})

test('200 vote yes', async t => {
  const app = await build(t)
  const response = await app.inject({
    method: 'POST',
    url: '/graphql',
    payload: {
      query: `mutation {
    voteAye(voteId: 1) {
    id
    title
    ayes
    noes
  }
}`
    }
  })

  t.strictEqual(response.statusCode, 200)
  t.deepEqual(JSON.parse(response.payload), { data: { voteAye: { id: 1, title: 'test', ayes: 1, noes: 0 } } })

  return true
})

test('200 vote no', async t => {
  const app = await build(t)
  const response = await app.inject({
    method: 'POST',
    url: '/graphql',
    payload: {
      query: `mutation {
    voteNo(voteId: 1) {
    id
    title
    ayes
    noes
  }
}`
    }
  })

  t.strictEqual(response.statusCode, 200)
  t.deepEqual(JSON.parse(response.payload), { data: { voteNo: { id: 1, title: 'test', ayes: 1, noes: 1 } } })

  return true
})
*/
